# WordWield Setup (2025_12)

## 1) Create a new project folder
- Make a folder under `projects/`, e.g. `projects/hello`.
- You only need `main.py` to start; on first run, WordWield will create `operators/`, `schemas/`, `models/`, `logs/`, and `expertise/` for you.

## 2) Minimal `main.py` (borrowed from `projects/jarvis/main.py`)
```python
import sys, os

PROJECT_PATH = os.path.abspath(os.path.dirname(__file__))
PROJECT_NAME = os.path.basename(PROJECT_PATH)

ROOT = os.path.join(PROJECT_PATH, '..', '..')
if ROOT not in sys.path:
    sys.path.insert(0, ROOT)

from wordwield import ww

# Initialize WordWield (reset_db wipes and recreates tables)
ww.init(
    PROJECT_NAME = PROJECT_NAME,
    PROJECT_PATH = PROJECT_PATH,
    reset_db     = True
)

task = input('What would you like me to do? ')
ww(ww.operators.Orchestrator(PROJECT_NAME)(task=task))
```
- Save this as `projects/hello/main.py`.
- Run it: `python projects/hello/main.py` (ensure `PYTHONPATH` includes repo root or use the sys.path shim above).

## 3) Define your first operator/agent (adapted from `projects/jarvis/operators/Orchestrator.py`)
Create `projects/hello/operators/Orchestrator.py`:
```python
from wordwield import ww

class Orchestrator(ww.operators.Agent):
    agents = {
        'expert': ww.operators.Expert  # built-in simple expert example
    }

    async def invoke(self, task):
        expertise = await self.agents.expert('roi')
        for exp in expertise:
            print(exp, end='\n\n')
```
- On next `ww.init`, this file is auto-discovered and callable as `ww.operators.Orchestrator`.

## 4) Hello-world operator (echo)
Create `projects/hello/operators/Echo.py`:
```python
from wordwield import ww

class Echo(ww.operators.Agent):
    async def invoke(self, text):
        return f"Echo: {text}"
```
Use it:
```python
from wordwield import ww
ww.init(PROJECT_NAME="hello", PROJECT_PATH="projects/hello")
print(ww.operators.Echo()(text="Hi WW"))
```

## 5) Hello-world with structured output
Create `projects/hello/operators/Greet.py`:
```python
from wordwield import ww
from wordwield.lib import O

class Reply(O):
    answer: str = O.Field(description="Concise reply")

class Greet(ww.operators.Agent):
    ResponseSchema = Reply
    template = "Greet {{ name }} in one short sentence."
```
Use it:
```python
from wordwield import ww
ww.init(PROJECT_NAME="hello", PROJECT_PATH="projects/hello")
resp = ww.operators.Greet()(name="Alex")
print(resp)  # {'answer': 'Hello, Alex!'}
```

## 6) Streams quickstart (dialogue log)
```python
from wordwield import ww
ww.init(PROJECT_NAME="hello", PROJECT_PATH="projects/hello")

user_stream = ww.schemas.StreamSchema.put(name="user", role="user", author="You")
bot_stream  = ww.schemas.StreamSchema.put(name="bot",  role="assistant", author="Bot")

user_stream.write("Hello!")
bot_stream.write("Hi there, how can I help?")

dialogue = ww.schemas.StreamSchema.zip(user_stream, bot_stream)
print(dialogue.to_prompt())  # merged timeline for prompts/debug
```

## 7) Run without a server
- No server required: just run `python projects/hello/main.py`.
- If you want the minimal FastAPI echo server, use `PYTHONPATH=$(pwd) uvicorn wordwield.web.server:app --reload`.

## 8) Tips
- Set `PROJECT_PATH` in `.env` to use `make run` (if you adapt the Makefile).
- New `.py` files under `operators/`, `schemas/`, `models/` are auto-registered on the next `ww.init`.
- Use `reset_db=False` to keep DB state across runs.
